From 2617910e97bc0ab0297bfd2252160081933b5a2c Mon Sep 17 00:00:00 2001
From: Conor Dooley <conor.dooley@microchip.com>
Date: Wed, 7 Jul 2021 14:29:14 +0100
Subject: [PATCH 37/93] riscv: icicle kit: add amp support

---
 arch/riscv/boot/dts/microchip/Makefile        |   1 +
 .../microchip-mpfs-icicle-kit-context-a.dts   | 479 ++++++++++++++++++
 arch/riscv/configs/icicle_kit_amp_defconfig   | 175 +++++++
 3 files changed, 655 insertions(+)
 create mode 100644 arch/riscv/boot/dts/microchip/microchip-mpfs-icicle-kit-context-a.dts
 create mode 100644 arch/riscv/configs/icicle_kit_amp_defconfig

diff --git a/arch/riscv/boot/dts/microchip/Makefile b/arch/riscv/boot/dts/microchip/Makefile
index 622b12771fd3..5154a2309492 100644
--- a/arch/riscv/boot/dts/microchip/Makefile
+++ b/arch/riscv/boot/dts/microchip/Makefile
@@ -1,2 +1,3 @@
 # SPDX-License-Identifier: GPL-2.0
 dtb-$(CONFIG_SOC_MICROCHIP_POLARFIRE) += microchip-mpfs-icicle-kit.dtb
+dtb-$(CONFIG_SOC_MICROCHIP_POLARFIRE) += microchip-mpfs-icicle-kit-context-a.dtb
diff --git a/arch/riscv/boot/dts/microchip/microchip-mpfs-icicle-kit-context-a.dts b/arch/riscv/boot/dts/microchip/microchip-mpfs-icicle-kit-context-a.dts
new file mode 100644
index 000000000000..30618e738ed9
--- /dev/null
+++ b/arch/riscv/boot/dts/microchip/microchip-mpfs-icicle-kit-context-a.dts
@@ -0,0 +1,479 @@
+// SPDX-License-Identifier: (GPL-2.0 OR MIT)
+/* Copyright (c) 2019-2020 Microchip Technology Inc */
+/dts-v1/;
+#include <dt-bindings/clock/microchip,mpfs-clock.h>
+/ {
+	#address-cells = <2>;
+	#size-cells = <2>;
+	compatible = "SiFive,FU540G-dev", "fu540-dev", "sifive-dev";
+	model = "SiFive,FU540G";
+	L45: cpus {
+		#address-cells = <1>;
+		#size-cells = <0>;
+		timebase-frequency = <1000000>;
+		L8: cpu@0 {
+			compatible = "sifive,rocket0", "riscv";
+			device_type = "cpu";
+			i-cache-block-size = <64>;
+			i-cache-sets = <128>;
+			i-cache-size = <16384>;
+			reg = <0>;
+			riscv,isa = "rv64imac";
+			status = "disabled";
+			L4: interrupt-controller {
+				#interrupt-cells = <1>;
+				compatible = "riscv,cpu-intc";
+				interrupt-controller;
+			};
+		};
+		L12: cpu@1 {
+			compatible = "sifive,rocket0", "riscv";
+			d-cache-block-size = <64>;
+			d-cache-sets = <64>;
+			d-cache-size = <32768>;
+			d-tlb-sets = <1>;
+			d-tlb-size = <32>;
+			device_type = "cpu";
+			i-cache-block-size = <64>;
+			i-cache-sets = <64>;
+			i-cache-size = <32768>;
+			i-tlb-sets = <1>;
+			i-tlb-size = <32>;
+			mmu-type = "riscv,sv39";
+			reg = <1>;
+			riscv,isa = "rv64imafdc";
+			tlb-split;
+			status = "okay";
+			L9: interrupt-controller {
+				#interrupt-cells = <1>;
+				compatible = "riscv,cpu-intc";
+				interrupt-controller;
+			};
+		};
+		L16: cpu@2 {
+			compatible = "sifive,rocket0", "riscv";
+			d-cache-block-size = <64>;
+			d-cache-sets = <64>;
+			d-cache-size = <32768>;
+			d-tlb-sets = <1>;
+			d-tlb-size = <32>;
+			device_type = "cpu";
+			i-cache-block-size = <64>;
+			i-cache-sets = <64>;
+			i-cache-size = <32768>;
+			i-tlb-sets = <1>;
+			i-tlb-size = <32>;
+			mmu-type = "riscv,sv39";
+			reg = <2>;
+			riscv,isa = "rv64imafdc";
+			tlb-split;
+			status = "okay";
+			L13: interrupt-controller {
+				#interrupt-cells = <1>;
+				compatible = "riscv,cpu-intc";
+				interrupt-controller;
+			};
+		};
+		L20: cpu@3 {
+			compatible = "sifive,rocket0", "riscv";
+			d-cache-block-size = <64>;
+			d-cache-sets = <64>;
+			d-cache-size = <32768>;
+			d-tlb-sets = <1>;
+			d-tlb-size = <32>;
+			device_type = "cpu";
+			i-cache-block-size = <64>;
+			i-cache-sets = <64>;
+			i-cache-size = <32768>;
+			i-tlb-sets = <1>;
+			i-tlb-size = <32>;
+			mmu-type = "riscv,sv39";
+			reg = <3>;
+			riscv,isa = "rv64imafdc";
+			tlb-split;
+			status = "disabled";
+			L17: interrupt-controller {
+				#interrupt-cells = <1>;
+				compatible = "riscv,cpu-intc";
+				interrupt-controller;
+			};
+		};
+		L24: cpu@4 {
+			compatible = "sifive,rocket0", "riscv";
+			d-cache-block-size = <64>;
+			d-cache-sets = <64>;
+			d-cache-size = <32768>;
+			d-tlb-sets = <1>;
+			d-tlb-size = <32>;
+			device_type = "cpu";
+			i-cache-block-size = <64>;
+			i-cache-sets = <64>;
+			i-cache-size = <32768>;
+			i-tlb-sets = <1>;
+			i-tlb-size = <32>;
+			mmu-type = "riscv,sv39";
+			reg = <4>;
+			riscv,isa = "rv64imafdc";
+			tlb-split;
+			status = "okay";
+			L21: interrupt-controller {
+				#interrupt-cells = <1>;
+				compatible = "riscv,cpu-intc";
+				interrupt-controller;
+			};
+		};
+	};
+	reserved-memory {
+		ranges;
+		#size-cells = <2>;
+		#address-cells = <2>;
+		fabricbuf0: fabricbuf@0 {
+			compatible = "shared-dma-pool";
+			reg = <0x00 0xadb00000 0x0 0x02000000>;
+			label = "fabricbuf0-ddr-c";
+		};
+		fabricbuf1: fabricbuf@1 {
+			compatible = "shared-dma-pool";
+			reg = <0x00 0xc0000000 0x0 0x08000000>;
+			label = "fabricbuf1-ddr-nc";
+		};
+		fabricbuf2: fabricbuf@2 {
+			compatible = "shared-dma-pool";
+			reg = <0x00 0xd8000000 0x0 0x08000000>;
+			label = "fabricbuf2-ddr-nc-wcb";
+		};
+	};
+	L44: soc {
+		#address-cells = <2>;
+		#size-cells = <2>;
+		compatible = "SiFive,FU540G-soc", "fu540-soc", "sifive-soc", "simple-bus";
+		ranges;
+		DDRC_CACHE_LO: memory@80000000 {
+			device_type = "memory";
+			reg = <0x0 0x80000000 0x0 0x2db00000>;
+			clocks = <&clkcfg CLK_DDRC>;
+			status = "okay";
+		};
+		DDRC_CACHE_HI: memory@1000000000 {
+			device_type = "memory";
+			reg = <0x10 0x00000000 0x0 0x40000000>;
+			clocks = <&clkcfg CLK_DDRC>;
+			status = "okay";
+		};
+		L0: cache-controller@2010000 {
+			compatible = "sifive,fu540-c000-ccache", "cache";
+			cache-block-size = <64>;
+			cache-level = <2>;
+			cache-sets = <1024>;
+			cache-size = <2097152>;
+			cache-unified;
+			interrupt-parent = <&L1>;
+			interrupts = <1 2 3>;
+			reg = <0x0 0x2010000 0x0 0x1000>;
+		};
+		L1: interrupt-controller@c000000 {
+			#interrupt-cells = <1>;
+			compatible = "sifive,plic-1.0.0";
+			reg = <0x0 0xc000000 0x0 0x4000000>;
+			riscv,ndev = <186>;
+			interrupt-controller;
+			interrupts-extended = <&L4 11 &L9 11 &L9 9 &L13 11 &L13 9 &L17 11 &L17 9 &L21 11 &L21 9>;
+		};
+		pdma: pdma@3000000 {
+			compatible = "microchip,mpfs-pdma-uio";
+			reg = <0x0 0x3000000 0x0 0x8000>;
+			interrupt-parent = <&L1>;
+			interrupts = <5 6 7 8 9 10 11 12>;
+			#dma-cells = <1>;
+		};
+		udmabuf@0 {
+			compatible = "ikwzm,u-dma-buf";
+			device-name = "udmabuf-ddr-c0";
+			minor-number = <0>;
+			size = <0x0 0x02000000>;
+			memory-region = <&fabricbuf0>;
+			sync-mode = <3>;
+		}; 
+		udmabuf@1 {
+			compatible = "ikwzm,u-dma-buf";
+			device-name = "udmabuf-ddr-nc0";
+			minor-number = <1>;
+			size = <0x0 0x08000000>;
+			memory-region = <&fabricbuf1>;
+			sync-mode = <3>;
+		};
+		udmabuf@2 {
+			compatible = "ikwzm,u-dma-buf";
+			device-name = "udmabuf-ddr-nc-wcb0";
+			minor-number = <2>;
+			size = <0x0 0x08000000>;
+			memory-region = <&fabricbuf2>;
+			sync-mode = <3>;
+
+		};
+		refclk: refclk {
+			compatible = "fixed-clock";
+			#clock-cells = <0>;
+			clock-frequency = <600000000>;
+			clock-output-names = "msspllclk";
+		};
+		clkcfg: clkcfg@20002000 {
+			compatible = "microchip,mpfs-clkcfg";
+			reg = <0x0 0x20002000 0x0 0x1000>;
+			reg-names = "mss_sysreg";
+			clocks = <&refclk>;
+			#clock-cells = <1>;
+			clock-output-names = "cpu", "axi", "ahb", "envm", "mac0", "mac1", "mmc",
+					     "timer", "uart0", "uart1", "uart2", "uart3", "uart4",
+					     "spi0", "spi1", "i2c0", "i2c1", "can0", "can1", "usb",
+					     "rsvd", "rtc", "qspi", "gpio0", "gpio1", "gpio2",
+					     "ddrc", "fic0", "fic1", "fic2", "fic3", "athena",
+					     "cfm";
+		};
+		rtc: rtc@20124000 {
+			#address-cells = <1>;
+			#size-cells = <0>;
+			compatible = "microchip,mpfs-rtc";
+			reg = <0x0 0x20124000 0x0 0x1000>;
+			interrupt-parent = <&L1>;
+			interrupts = <80 81>;
+			clocks = <&clkcfg CLK_RTC>;
+			clock-names = "rtc";
+		};	
+		serial0: serial@20000000 {
+			compatible = "ns16550a";
+			reg = <0x0 0x20000000 0x0 0x400>;
+			reg-io-width = <4>;
+			reg-shift = <2>;
+			interrupt-parent = <&L1>;
+			interrupts = <90>;
+			current-speed = <115200>;
+			clocks = <&clkcfg CLK_MMUART0>;
+			status = "disabled"; /* Reserved for the HSS */
+		};
+		serial1: serial@20100000 {
+			compatible = "ns16550a";
+			reg = <0x0 0x20100000 0x0 0x400>;
+			reg-io-width = <4>;
+			reg-shift = <2>;
+			interrupt-parent = <&L1>;
+			interrupts = <91>;
+			current-speed = <115200>;
+			clocks = <&clkcfg CLK_MMUART1>;
+			status = "okay";
+		};
+		serial2: serial@20102000 {
+			compatible = "ns16550a";
+			reg = <0x0 0x20102000 0x0 0x400>;
+			reg-io-width = <4>;
+			reg-shift = <2>;
+			interrupt-parent = <&L1>;
+			interrupts = <92>;
+			current-speed = <115200>;
+			clocks = <&clkcfg CLK_MMUART2>;
+			status = "okay";
+		};
+		serial3: serial@20104000 {
+			compatible = "ns16550a";
+			reg = <0x0 0x20104000 0x0 0x400>;
+			reg-io-width = <4>;
+			reg-shift = <2>;
+			interrupt-parent = <&L1>;
+			interrupts = <93>;
+			current-speed = <115200>;
+			clocks = <&clkcfg CLK_MMUART3>;
+			status = "disabled";
+		};
+		emmc: mmc@20008000 { /* Common node entry for emmc/sd */
+		    compatible = "cdns,sd4hc";
+		    reg = <0x0 0x20008000 0x0 0x1000>;
+		    interrupt-parent = <&L1>;
+		    interrupts = <88 89>;
+		    pinctrl-names = "default";
+		    clocks = <&clkcfg CLK_MMC>;
+		    bus-width = <4>;
+		    cap-mmc-highspeed;
+		    cap-sd-highspeed;
+		    no-1-8-v;
+		    disable-wp;
+		    max-frequency = <200000000>;
+		    status = "okay";
+		};
+		emac1: ethernet@20112000 {
+            compatible = "cdns,macb";
+            reg = <0x0 0x20112000 0x0 0x2000>;
+            interrupt-parent = <&L1>;
+            interrupts = <70 71 72 73>;
+            mac-address = [56 34 12 00 FC 01];
+            phy-mode = "sgmii";
+            clocks = <&clkcfg CLK_MAC1>, <&clkcfg CLK_AHB>;
+            clock-names = "pclk", "hclk";
+            #address-cells = <1>;
+            #size-cells = <0>;
+            phy-handle = <&phy1>;
+            phy1: ethernet-phy@9 {
+                reg = <9>;
+                ti,fifo-depth = <0x01>;
+            };
+            phy0: ethernet-phy@8 {
+                reg = <8>;
+                ti,fifo-depth = <0x01>;
+            };
+        };
+        emac0: ethernet@20110000 {
+            compatible = "cdns,macb";
+            reg = <0x0 0x20110000 0x0 0x2000>;
+            interrupt-parent = <&L1>;
+            interrupts = <64 65 66 67>;
+            mac-address = [56 34 12 00 FC 02];
+            phy-mode = "sgmii";
+            clocks = <&clkcfg CLK_MAC0>, <&clkcfg CLK_AHB>;
+            clock-names = "pclk", "hclk";
+            phy-handle = <&phy0>;
+        };
+		pcie: pcie@70000000 {
+			#address-cells = <0x3>;
+			#interrupt-cells = <0x1>;
+			#size-cells = <0x2>;
+			compatible = "microchip,pcie-host-1.0";
+			device_type = "pci";
+			clocks = <&clkcfg CLK_FIC0>, <&clkcfg CLK_FIC1>, <&clkcfg CLK_FIC3>;
+			clock-names = "fic0", "fic1", "fic3";
+			bus-range = <0x00 0x7f>;
+			interrupt-map = <0 0 0 1 &pcie_intc 0>,
+					<0 0 0 2 &pcie_intc 1>,
+					<0 0 0 3 &pcie_intc 2>,
+					<0 0 0 4 &pcie_intc 3>;
+			interrupt-map-mask = <0 0 0 7>;
+			interrupt-parent = <&L1>;
+			interrupts = <119>;
+			ranges = <0x03000000 0x0 0x78000000 0x0 0x78000000 0x0 0x04000000>;
+			reg = <0x0 0x70000000 0x0 0x08000000 0x0 0x43000000 0x0 0x00010000>;
+			dma-ranges = <0x02000000 0x0 0x00000000 0x0 0x00000000 0x1 0x00000000>;
+			reg-names = "cfg", "apb";
+			msi-parent = <&pcie>;
+			msi-controller;
+			status = "okay";
+			pcie_intc: interrupt-controller {
+				#address-cells = <0>;
+				#interrupt-cells = <1>;
+				interrupt-controller;
+			};
+		};
+		i2c1: i2c@2010b000 {
+			#address-cells = <1>;
+			#size-cells = <0>;
+			compatible = "microsemi,ms-pf-mss-i2c";
+			reg = <0x0 0x2010b000 0x0 0x1000>;
+			interrupt-parent = <&L1>;
+			interrupts = <61>;
+			clock-frequency = <100000>;
+			clocks = <&clkcfg CLK_I2C1>;
+			status = "okay";
+			pac193x: pac193x@10 {
+				compatible = "microchip,pac1934";
+				reg = <0x10>;
+				samp-rate = <64>;
+				status = "okay";
+				ch0: channel0 {
+					uohms-shunt-res = <10000>;
+					rail-name = "VDDREG";
+					channel_enabled;
+				};
+				ch1: channel1 {
+					uohms-shunt-res = <10000>;
+					rail-name = "VDDA25";
+					channel_enabled;
+				};
+				ch2: channel2 {
+					uohms-shunt-res = <10000>;
+					rail-name = "VDD25";
+					channel_enabled;
+				};
+				ch3: channel3 {
+					uohms-shunt-res = <10000>;
+					rail-name = "VDDA_REG";
+					channel_enabled;
+				};
+			};
+		};
+		mssgpio: gpio@20122000 {
+			compatible = "microsemi,ms-pf-mss-gpio";
+			interrupt-parent = <&L1>;
+			interrupts = <13 14 15 16 17 18 19 20 21 22 23 24 25 26 27 28 29 30 31 32 33 34 35 36 37 38 39 40 41 42 43 44>;
+			gpio-controller;
+			clocks = <&clkcfg CLK_GPIO2>;
+			reg = <0x00 0x20122000 0x0 0x1000>;
+			reg-names = "control";
+			#gpio-cells = <2>;
+			status = "disabled";
+		};
+		mssusb: usb@20201000 {
+			compatible = "microchip,mpfs-usb-host";
+			reg = <0x0 0x20201000 0x00000000 0x00001000>;
+			reg-names = "mc","control";
+			clocks = <&clkcfg CLK_USB>;
+			interrupt-parent = <&L1>;
+			interrupts = <87 86>;
+			interrupt-names = "mc","dma";
+			dr_mode = "host";
+			status = "okay";
+		};
+		msscan: can@2010c000 {
+			#address-cells = <1>;
+			#size-cells = <0>;
+			compatible = "microchip,mpfs-can-uio";
+			reg = <0x0 0x2010c000 0x0 0x1000>;
+			interrupt-parent = <&L1>;
+			interrupts = <56>;
+			clocks = <&clkcfg CLK_CAN0>;
+			status = "okay";
+		};
+		uio_lsram: uio_lpddr4@0xC0000000 {
+			compatible = "generic-uio";
+			reg = < 0x0 0x61000000 0x0 0x00010000
+					0x14 0x00000000 0x0 0x00010000 >;
+			status = "okay";
+		};
+		dma: dma@0x60020000 {
+			#address-cells = <1>;
+			#size-cells = <0>;
+			compatible = "microsemi,ms-pf-mss-dma-uio";
+			reg = <0x00 0x60020000 0x0 0x1000>;
+			interrupt-parent = <&L1>;
+			interrupts = <120>;
+			status = "okay";
+		};
+		mbox: mailbox@37020000 {
+			compatible = "microchip,polarfire-soc-mailbox";
+			reg = <0x0 0x37020000 0x0 0x1000>, <0x0 0x2000318C 0x0 0x40>;
+			interrupt-parent = <&L1>;
+			interrupts = <96>;
+			#mbox-cells = <1>;
+		};
+		syscontroller: syscontroller {
+			compatible = "microchip,polarfire-soc-sys-controller";
+			#address-cells = <1>;
+			#size-cells = <1>;
+			mboxes = <&mbox 0>;
+		};
+		hwrandom: hwrandom {
+			compatible = "microchip,polarfire-soc-rng";
+			#address-cells = <1>;
+			#size-cells = <1>;
+			syscontroller = <&syscontroller>;
+		};
+		serialnum: serialnum {
+			compatible = "microchip,polarfire-soc-serial-number";
+			#address-cells = <1>;
+			#size-cells = <1>;
+			syscontroller = <&syscontroller>;
+		};
+		fpgadigest: fpgadigest {
+			compatible = "microchip,polarfire-soc-digest";
+			#address-cells = <1>;
+			#size-cells = <1>;
+			syscontroller = <&syscontroller>;
+		};
+	};
+};
\ No newline at end of file
diff --git a/arch/riscv/configs/icicle_kit_amp_defconfig b/arch/riscv/configs/icicle_kit_amp_defconfig
new file mode 100644
index 000000000000..ee83f30c9203
--- /dev/null
+++ b/arch/riscv/configs/icicle_kit_amp_defconfig
@@ -0,0 +1,175 @@
+CONFIG_CMDLINE_BOOL=y
+CONFIG_CMDLINE="earlyprintk debug console=ttyS0,115200n8 root=mmcblk0p3 clk_ignore_unused uio_pdrv_genirq.of_id=generic-uio"
+
+CONFIG_SYSVIPC=y
+CONFIG_POSIX_MQUEUE=y
+CONFIG_NO_HZ_IDLE=y
+CONFIG_HIGH_RES_TIMERS=y
+CONFIG_IKCONFIG=y
+CONFIG_IKCONFIG_PROC=y
+CONFIG_CGROUPS=y
+CONFIG_CGROUP_SCHED=y
+CONFIG_CFS_BANDWIDTH=y
+CONFIG_CGROUP_BPF=y
+CONFIG_NAMESPACES=y
+CONFIG_USER_NS=y
+CONFIG_CHECKPOINT_RESTORE=y
+CONFIG_BLK_DEV_INITRD=y
+CONFIG_EXPERT=y
+CONFIG_BPF_SYSCALL=y
+CONFIG_SOC_SIFIVE=y
+CONFIG_SOC_VIRT=y
+CONFIG_SOC_MICROCHIP_POLARFIRE=y
+CONFIG_SMP=y
+CONFIG_HOTPLUG_CPU=y
+CONFIG_JUMP_LABEL=y
+CONFIG_MODULES=y
+CONFIG_MODULE_UNLOAD=y
+CONFIG_NET=y
+CONFIG_PACKET=y
+CONFIG_UNIX=y
+CONFIG_INET=y
+CONFIG_IP_MULTICAST=y
+CONFIG_IP_ADVANCED_ROUTER=y
+CONFIG_IP_PNP=y
+CONFIG_IP_PNP_DHCP=y
+CONFIG_IP_PNP_BOOTP=y
+CONFIG_IP_PNP_RARP=y
+CONFIG_NETLINK_DIAG=y
+CONFIG_NET_9P=y
+CONFIG_NET_9P_VIRTIO=y
+
+CONFIG_PCI=y
+CONFIG_PCI_DEBUG=y
+CONFIG_PCI_DOMAINS=y
+CONFIG_PCI_DOMAINS_GENERIC=y
+CONFIG_PCI_ECAM=y
+CONFIG_PCI_HOST_COMMON=y
+CONFIG_PCI_HOST_GENERIC=y
+CONFIG_PCI_MSI=y
+CONFIG_PCI_MSI_IRQ_DOMAIN=y
+CONFIG_PCI_QUIRKS=y
+CONFIG_PCIE_MICROCHIP_HOST=y
+
+CONFIG_DEVTMPFS=y
+CONFIG_DEVTMPFS_MOUNT=y
+CONFIG_BLK_DEV_LOOP=y
+CONFIG_VIRTIO_BLK=y
+CONFIG_BLK_DEV_SD=y
+CONFIG_BLK_DEV_SR=y
+CONFIG_SCSI_VIRTIO=y
+CONFIG_ATA=y
+CONFIG_SATA_AHCI=y
+CONFIG_SATA_AHCI_PLATFORM=y
+CONFIG_NETDEVICES=y
+CONFIG_VIRTIO_NET=y
+CONFIG_MACB=y
+CONFIG_E1000E=y
+CONFIG_R8169=y
+CONFIG_MICROSEMI_PHY=y
+CONFIG_INPUT_MOUSEDEV=y
+CONFIG_SERIAL_8250=y
+CONFIG_SERIAL_8250_CONSOLE=y
+CONFIG_SERIAL_OF_PLATFORM=y
+CONFIG_SERIAL_EARLYCON_RISCV_SBI=y
+CONFIG_HVC_RISCV_SBI=y
+CONFIG_VIRTIO_CONSOLE=y
+CONFIG_HW_RANDOM=y
+CONFIG_HW_RANDOM_VIRTIO=y
+CONFIG_SPI=y
+CONFIG_SPI_MASTER=y
+CONFIG_SPI_SIFIVE=y
+CONFIG_SPI_MICROSEMI=y
+CONFIG_SPI_MICROSEMI_QSPI=y
+CONFIG_GPIOLIB=y
+CONFIG_GPIOLIB_IRQCHIP=y
+CONFIG_OF_GPIO=y
+CONFIG_GPIO_MPFS=y
+CONFIG_GPIO_MICROSEMI=y
+# CONFIG_PTP_1588_CLOCK is not set
+CONFIG_POWER_RESET=y
+CONFIG_DRM=y
+CONFIG_DRM_RADEON=y
+CONFIG_DRM_VIRTIO_GPU=y
+CONFIG_FRAMEBUFFER_CONSOLE=y
+CONFIG_USB=y
+CONFIG_USB_XHCI_HCD=y
+CONFIG_USB_XHCI_PLATFORM=y
+CONFIG_USB_EHCI_HCD=y
+CONFIG_USB_EHCI_HCD_PLATFORM=y
+CONFIG_USB_OHCI_HCD=y
+CONFIG_USB_OHCI_HCD_PLATFORM=y
+CONFIG_USB_STORAGE=y
+CONFIG_USB_UAS=y
+CONFIG_MMC_SDHCI=y
+CONFIG_MMC_SDHCI_PLTFM=y
+CONFIG_MMC_SDHCI_CADENCE=y
+CONFIG_MMC=y
+CONFIG_MMC_SPI=y
+CONFIG_RTC_CLASS=y
+CONFIG_VIRTIO_PCI=y
+CONFIG_VIRTIO_BALLOON=y
+CONFIG_VIRTIO_INPUT=y
+CONFIG_VIRTIO_MMIO=y
+CONFIG_RPMSG_CHAR=y
+CONFIG_RPMSG_VIRTIO=y
+CONFIG_EXT4_FS=y
+CONFIG_EXT4_FS_POSIX_ACL=y
+CONFIG_AUTOFS4_FS=y
+CONFIG_MSDOS_FS=y
+CONFIG_VFAT_FS=y
+CONFIG_TMPFS=y
+CONFIG_TMPFS_POSIX_ACL=y
+CONFIG_NFS_FS=y
+CONFIG_NFS_V4=y
+CONFIG_NFS_V4_1=y
+CONFIG_NFS_V4_2=y
+CONFIG_ROOT_NFS=y
+CONFIG_9P_FS=y
+CONFIG_CRYPTO_USER_API_HASH=y
+CONFIG_CRYPTO_DEV_VIRTIO=y
+CONFIG_PRINTK_TIME=y
+CONFIG_DEBUG_FS=y
+CONFIG_DEBUG_PAGEALLOC=y
+CONFIG_SCHED_STACK_END_CHECK=y
+CONFIG_DEBUG_VM=y
+CONFIG_DEBUG_VM_PGFLAGS=y
+CONFIG_DEBUG_MEMORY_INIT=y
+CONFIG_DEBUG_PER_CPU_MAPS=y
+CONFIG_SOFTLOCKUP_DETECTOR=y
+CONFIG_WQ_WATCHDOG=y
+CONFIG_DEBUG_TIMEKEEPING=y
+CONFIG_DEBUG_RT_MUTEXES=y
+CONFIG_DEBUG_SPINLOCK=y
+CONFIG_DEBUG_MUTEXES=y
+CONFIG_DEBUG_RWSEMS=y
+CONFIG_DEBUG_ATOMIC_SLEEP=y
+CONFIG_STACKTRACE=y
+CONFIG_DEBUG_LIST=y
+CONFIG_DEBUG_PLIST=y
+CONFIG_DEBUG_SG=y
+# CONFIG_RCU_TRACE is not set
+CONFIG_RCU_EQS_DEBUG=y
+CONFIG_DEBUG_BLOCK_EXT_DEVT=y
+# CONFIG_FTRACE is not set
+# CONFIG_RUNTIME_TESTING_MENU is not set
+CONFIG_MEMTEST=y
+# CONFIG_SYSFS_SYSCALL is not set
+CONFIG_EFI=y
+
+CONFIG_MAILBOX=y
+CONFIG_HW_RANDOM=y
+CONFIG_POLARFIRE_SOC_MAILBOX=y
+CONFIG_POLARFIRE_SOC_SYS_CTRL=y
+CONFIG_HW_RANDOM_POLARFIRE_SOC=y
+CONFIG_RTC_DRV_MPFS=y
+CONFIG_I2C_MICROCHIP=y
+
+CONFIG_PWM=y
+CONFIG_PWM_DEBUG=y
+CONFIG_PWM_MICROCHIP_CORE=y
+
+CONFIG_POLARFIRE_SOC_SERIAL_NUMBER=y
+CONFIG_POLARFIRE_SOC_FPGA_DIGEST=y
+CONFIG_POLARFIRE_SOC_SIGNATURE=y
+CONFIG_POLARFIRE_SOC_FPGA_CERT=y
\ No newline at end of file
-- 
2.30.2

