From d513182bf5a51b18010ae189183fe391de9a5967 Mon Sep 17 00:00:00 2001
From: Valentina Fernandez <valentina.fernandezalanis@microchip.com>
Date: Thu, 28 Oct 2021 12:52:57 +0100
Subject: [PATCH 72/93] riscv: dts: icicle-kit: update mem layout and hart
 assignment

---
 .../microchip-mpfs-icicle-kit-context-a.dts   | 48 ++++++++++++++-----
 1 file changed, 37 insertions(+), 11 deletions(-)

diff --git a/arch/riscv/boot/dts/microchip/microchip-mpfs-icicle-kit-context-a.dts b/arch/riscv/boot/dts/microchip/microchip-mpfs-icicle-kit-context-a.dts
index 04311dca997d..1aff012f9d5a 100644
--- a/arch/riscv/boot/dts/microchip/microchip-mpfs-icicle-kit-context-a.dts
+++ b/arch/riscv/boot/dts/microchip/microchip-mpfs-icicle-kit-context-a.dts
@@ -35,7 +35,7 @@ reserved-memory {
 
 		fabricbuf0: fabricbuf@0 {
 			compatible = "shared-dma-pool";
-			reg = <0x0 0xadb00000 0x0 0x2000000>;
+			reg = <0x0 0xa0000000 0x0 0x2000000>;
 			label = "fabricbuf0-ddr-c";
 		};
 
@@ -79,9 +79,9 @@ udmabuf2 {
 		sync-mode = <3>;
 	};
 
-	DDRC_CACHE_LO: memory@80000000 {
+	ddrc_cache_lo: memory@80000000 {
 		device_type = "memory";
-		reg = <0x0 0x80000000 0x0 0x2db00000>;
+		reg = <0x0 0x80000000 0x0 0x20000000>;
 		clocks = <&clkcfg CLK_DDRC>;
 		status = "okay";
 	};
@@ -201,14 +201,40 @@ phy0: ethernet-phy@8 {
 	};
 };
 
-&gpio0 {
-	status = "disabled"; // in use by context b
-};
-&gpio1 {
-	status = "disabled"; // in use by context b
-};
 &gpio2 {
-	status = "disabled"; // in use by context b
+	interrupts = <PLIC_INT_GPIO2_NON_DIRECT
+		PLIC_INT_GPIO2_NON_DIRECT
+		PLIC_INT_GPIO2_NON_DIRECT
+		PLIC_INT_GPIO2_NON_DIRECT
+		PLIC_INT_GPIO2_NON_DIRECT
+		PLIC_INT_GPIO2_NON_DIRECT
+		PLIC_INT_GPIO2_NON_DIRECT
+		PLIC_INT_GPIO2_NON_DIRECT
+		PLIC_INT_GPIO2_NON_DIRECT
+		PLIC_INT_GPIO2_NON_DIRECT
+		PLIC_INT_GPIO2_NON_DIRECT
+		PLIC_INT_GPIO2_NON_DIRECT
+		PLIC_INT_GPIO2_NON_DIRECT
+		PLIC_INT_GPIO2_NON_DIRECT
+		PLIC_INT_GPIO2_NON_DIRECT
+		PLIC_INT_GPIO2_NON_DIRECT
+		PLIC_INT_GPIO2_NON_DIRECT
+		PLIC_INT_GPIO2_NON_DIRECT
+		PLIC_INT_GPIO2_NON_DIRECT
+		PLIC_INT_GPIO2_NON_DIRECT
+		PLIC_INT_GPIO2_NON_DIRECT
+		PLIC_INT_GPIO2_NON_DIRECT
+		PLIC_INT_GPIO2_NON_DIRECT
+		PLIC_INT_GPIO2_NON_DIRECT
+		PLIC_INT_GPIO2_NON_DIRECT
+		PLIC_INT_GPIO2_NON_DIRECT
+		PLIC_INT_GPIO2_NON_DIRECT
+		PLIC_INT_GPIO2_NON_DIRECT
+		PLIC_INT_GPIO2_NON_DIRECT
+		PLIC_INT_GPIO2_NON_DIRECT
+		PLIC_INT_GPIO2_NON_DIRECT
+		PLIC_INT_GPIO2_NON_DIRECT>;
+		status = "okay";
 };
 
 &rtc {
@@ -227,6 +253,6 @@ &pcie {
 	status = "okay";
 };
 
-&cpu3 {
+&cpu4 {
 	status = "disabled"; // in use by context b
 };
-- 
2.30.2

